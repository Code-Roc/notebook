# 修复Struts2的S2-045漏洞

首先丢个exp，用于检验漏洞存在性：[exp.S2-045.py](code/exp.S2-045.py)

使用方法示例：

```
python exp.S2-045.py http://example.com/example.action "id"
```

----

翻遍了官网和各种新闻，没有切实可行的方案，下载地址只有存在漏洞的2.3.31的版本，漏洞修复方案都是简略的一句升级到2.3.32，某些播报平台&官方真是mdzz，到底是为了促进漏洞修补还是促进全网被黑？

官方只是给了一个maven的配置方法，并没有直接可以下载的jar文件或zip包

只能按照官方的方法用maven去尝试构建一个struts应用(快速装好maven的方法是买个香港的vps用docker pull maven)，总算发现了新版的jar包下载地址：

[https://repo.maven.apache.org/maven2/org/apache/struts/](https://repo.maven.apache.org/maven2/org/apache/struts/)

通过下载2.3.31核心包发现只有`struts2-core`是需要的，所以就下载这个jar咯：

[https://repo.maven.apache.org/maven2/org/apache/struts/struts2-core/2.3.32/struts2-core-2.3.32.jar](https://repo.maven.apache.org/maven2/org/apache/struts/struts2-core/2.3.32/struts2-core-2.3.32.jar)

国内CDN下载地址: [https://d.py3.io/struts2-core-2.3.32.jar](https://d.py3.io/struts2-core-2.3.32.jar)

例如服务器上用的是2.3.30版本，里面有一个struts2-core-2.3.30.jar，修复方法就是把上述的jar文件改成同样的名字去替换即可